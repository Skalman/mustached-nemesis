function Sql_tokenize(f,j){function y(b){throw Error("[SQL Tokenizer] Internal error: "+b);}function h(b,e,a){var d=g[b];d===k&&y("Don't know the name for token type "+b);z[d]||A.push({type:d,start:e,value:f.substring(e,a)});return a}function B(b){return" "===b||"\n"===b||"\t"===b}function l(b){return"0"<=b&&"9">=b}function C(b){return"_"===b||"a"<=b&&"z">=b||"A"<=b&&"Z">=b}function F(b){return C(b)||l(b)}function D(b){var e,a;if(b>=m)return G;e=f.charAt(b);a="'"===e?p:"`"===e?q:";"===e?r:B(e)?s: l(e)?n:C(e)?t:-1!==".,()+*=".indexOf(e)?i:k;if(a!==k)return a;b=f.charAt(b+1);return a="-"===e?"-"===b?u:i:"/"===e?"*"===b?E?v:i:i:"."===e&&l(b)?n:"!"===e&&"="===b?w:o}function H(b){var e=D(b),a;if(o===e){var d=a=b;for(a++;D(a)===o;)a++;a=h(o,d,a)}else if(s===e){d=a=b;do a++;while(B(f.charAt(a)));a=h(s,d,a)}else if(r===e)a=h(r,b,b+1);else if(u===e)d=b,a=f.indexOf("\n",d+2),-1===a&&(a=f.length),a=h(u,d,a);else if(v===e){var d=b,c=!1;a=f.indexOf("*/",d+2);-1!==a?a+=2:(a=f.length,c=!0);h(v,d,a);c&&h(x, a,a)}else if(p===e){b=a=b;for(a++;"'"!==d&&a<m;)d=f.charAt(a),a++,"\\"===d&&(c=f.charAt(a),("\\"===c||"'"===c)&&a++);h(p,b,a);"'"!==d&&h(x,a,a)}else if(q===e){d=a=b;for(a++;"`"!==c&&a<m;)c=f.charAt(a),a++,"`"===c&&"`"===f.charAt(a)&&(c=k,a++);h(q,d,a);"`"!==c&&h(x,a,a)}else if(t===e){d=a=b;do a++;while(F(f.charAt(a)));a=h(t,d,a)}else if(n===e){for(var d=b,e=b=!1,g=d;d!==a&&d<m;)if(c=f.charAt(d),a=d,l(c))d++;else if(!b&&"."===c)b=!0,d++;else if(!e&&("e"===c||"E"===c))c=f.charAt(d+1),("+"===c||"-"=== c)&&l(f.charAt(d+2))?(d+=3,e=!0):l(c)&&(d+=2,e=!0);a=h(n,g,d)}else a=i===e?h(i,b,b+1):w===e?h(w,b,b+2):y("Cannot process process token of type "+e);return a}var k,c,m=f.length;c=0;var G=c++,x=c++,r=c++,o=c++,s=c++,u=c++,v=c++,p=c++,t=c++,q=c++,n=c++,i=c++,w=c++,g=[],A=[],z={},E=!0;g[x]="unexpected end";g[r]="separator";g[o]="unknown";g[s]="whitespace";g[u]="comment";g[v]="comment";g[p]="value";g[t]="identifier";g[q]="identifier";g[n]="number";g[i]="operator";g[w]="operator";if(j!==k){if(j.ignore)for(c= 0;c<j.ignore.length;c++)z[j.ignore[c]]=!0;j.allow_multiline_comments!==k&&!j.allow_multiline_comments&&(E=!1)}for(c=0;c<m;)c=H(c);return A};